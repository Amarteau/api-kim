<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="130px" preserveAspectRatio="none" style="width:1553px;height:130px;background:#FFFFFF;" version="1.1" viewBox="0 0 1553 130" width="1553px" zoomAndPan="magnify"><defs/><g><g id="cm"><rect fill="#F1F1F1" height="68.8906" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="180" x="61" y="31.5"/><line style="stroke:#181818;stroke-width:0.5;" x1="61" x2="241" y1="57.7969" y2="57.7969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="133" x="84.5" y="49.4951">received Client-Mail</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="141" x="66" y="75.792">do / decode Base64</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="160" x="66" y="92.0889">exit / finished decoding</text></g><g id="dcm"><rect fill="#F1F1F1" height="101.4844" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="317" x="276.5" y="15.5"/><line style="stroke:#181818;stroke-width:0.5;" x1="276.5" x2="593.5" y1="41.7969" y2="41.7969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="136" x="367" y="33.4951">decoded Client-Mail</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="163" x="281.5" y="59.792">do / check mail integrity</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="136" x="281.5" y="76.0889">do / check mail size</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="138" x="281.5" y="92.3857">do / add KIM header</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="297" x="281.5" y="108.6826">exit / checks and header modification done</text></g><g id="cmcm"><rect fill="#F1F1F1" height="117.7813" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="439" x="628.5" y="7"/><line style="stroke:#181818;stroke-width:0.5;" x1="628.5" x2="1067.5" y1="33.2969" y2="33.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="227" x="734.5" y="24.9951">checked and modified Client-Mail</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="368" x="633.5" y="51.292">do / create copy of client mail as base for KOM-LE Mail</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="281" x="633.5" y="67.5889">do / sign and encrypt modified client mail</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="236" x="633.5" y="83.8857">do / upload resulting binary to KAS</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="419" x="633.5" y="100.1826">do / replace KOM-LE Mail body with KIM-Attachment structure</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="168" x="633.5" y="116.4795">exit / modifications done</text></g><g id="ckm"><rect fill="#F1F1F1" height="85.1875" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="389" x="1102.5" y="23.5"/><line style="stroke:#181818;stroke-width:0.5;" x1="1102.5" x2="1491.5" y1="49.7969" y2="49.7969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="140" x="1227" y="41.4951">created KOM-LE Mail</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="152" x="1107.5" y="67.792">do / add X-KIM header</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="177" x="1107.5" y="84.0889">do / sign and encrypt mail</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="369" x="1107.5" y="100.3857">exit / successful delivery of KOM-LE Mail to Fachdienst</text></g><ellipse cx="16" cy="66" fill="#222222" rx="10" ry="10" style="stroke:none;stroke-width:1.0;"/><ellipse cx="1537" cy="66" fill="none" rx="10" ry="10" style="stroke:#222222;stroke-width:1.0;"/><ellipse cx="1537.5" cy="66.5" fill="#222222" rx="6" ry="6" style="stroke:none;stroke-width:1.0;"/><!--MD5=[4647d493726018b36df2c527242da3fc]
link *start to cm--><g id="link_*start_cm"><path d="M26.02,66 C35.86,66 45.7,66 55.54,66 " fill="none" id="*start-to-cm" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="60.68,66,51.68,62,55.68,66,51.68,70,60.68,66" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[16a2b46eeb867afca46d77397d881b31]
link cm to dcm--><g id="link_cm_dcm"><path d="M241.14,66 C251.13,66 261.13,66 271.12,66 " fill="none" id="cm-to-dcm" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="276.35,66,267.35,62,271.35,66,267.35,70,276.35,66" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[7dc7a55551317a968e81b893261137ea]
link dcm to cmcm--><g id="link_dcm_cmcm"><path d="M593.5,66 C603.38,66 613.26,66 623.13,66 " fill="none" id="dcm-to-cmcm" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="628.3,66,619.3,62,623.3,66,619.3,70,628.3,66" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[6ea3575fe446b85aca5415713a31719b]
link cmcm to ckm--><g id="link_cmcm_ckm"><path d="M1067.68,66 C1077.47,66 1087.26,66 1097.05,66 " fill="none" id="cmcm-to-ckm" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="1102.16,66,1093.16,62,1097.16,66,1093.16,70,1102.16,66" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[d28bcf4841fb55ea8d6afb66d03142bd]
link ckm to *end--><g id="link_ckm_*end"><path d="M1491.53,66 C1501.51,66 1511.5,66 1521.48,66 " fill="none" id="ckm-to-*end" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="1526.7,66,1517.7,62,1521.7,66,1517.7,70,1526.7,66" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[aa0584c3b1481bf3364c2b115a6bf0c5]
@startuml

state "received Client-Mail" as cm
cm : do / decode Base64
cm : exit / finished decoding

state "decoded Client-Mail" as dcm
dcm: do / check mail integrity
dcm: do / check mail size
dcm: do / add KIM header
dcm: exit / checks and header modification done

state "checked and modified Client-Mail" as cmcm
cmcm: do / create copy of client mail as base for KOM-LE Mail
cmcm: do / sign and encrypt modified client mail
cmcm: do / upload resulting binary to KAS
cmcm: do / replace KOM-LE Mail body with KIM-Attachment structure
cmcm: exit / modifications done

state "created KOM-LE Mail" as ckm
ckm: do / add X-KIM header
ckm: do / sign and encrypt mail
ckm: exit / successful delivery of KOM-LE Mail to Fachdienst

[*] -r-> cm
cm -r-> dcm
dcm -r-> cmcm
cmcm -r-> ckm
ckm -r-> [*]

@enduml

PlantUML version 1.2022.5(Sat Apr 30 10:55:52 UTC 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>